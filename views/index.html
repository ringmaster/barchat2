<!DOCTYPE HTML>
<html>
<head>
	<title>BarChat</title>
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css" />
	<link rel="stylesheet" type="text/css" href="http://wavded.github.com/humane-js/themes/libnotify.css" />
	<style type="text/css">
html {
	height: 100%;
}
body {
	margin: 0px;
	font-family: arial;
	height: 100%;
}
header {
	background-color: #e0e0e0;
	height: 66px;
	position: fixed;
	top: 0px;
	left: 0px;
	width: 100%;
}
header h1 {
	color: white;
	padding: 10px;
	font-size: 200%;
}
#wrap {
	height: 100%;
}
#statusbar {
	width: 79px;
	border-right: 1px solid #eee;
	position: fixed;
	height: 100%;
	top: 0px;
	left: 0px;
	margin-top: 66px;
}
#statusbar label {
	font-size: 10px;
	background: #666;
	color: white;
	display: block;
	padding: 0px 0px 0px 10px;
	margin: 15px 0px 0px;
}
#statusbar .user {
	height: 32px;
	margin: 5px 5px;
}
#statusbar .user .status {
	width: 30px;
	height: 30px;
	border: 1px solid #eee;
	margin: 0px 5px 0px 0px;
	display: block;
	float: left;
}
#statusbar img {
	width: 32px;
	height: 32px;
}
#rooms {
	padding-bottom: 80px;
	margin: 66px 0px 0px 80px;
}
#controls {
	position: fixed;
	margin-left: 79px;
	bottom: 0px;
	background-color: #EEE;
	width: 100%;
	padding: 0px 5px 5px 5px;
}
#roomtabs {
	margin: 2px 0px 10px 0px;
}
#roomtabs li {
	display: inline;
	background-color: #ddd;
	padding: 2px 15px;
}
#roomtabs li.active {
	background-color: #fff;
}
.room {
	display: none;
}
.room.active {
	display: block;
}
#roomtabs a {
	color: #666;
	text-decoration: none;
}

.room p {
	font-size: 15px;
	margin-top: 30px;
}
	</style>

</head>
<body>

<header>
	<h1>BarChat</h1>
</header>

<div id="wrap">
	<div id="statusbar">
		<label>Online</label>
		<ul>
			<li class="user">
				<span class="status"></span>
				<img src="avatar.png">
			</li>
		</ul>
		<label>Services</label>
		<ul>
			<li class="user">
				<span class="status"></span>
				<img src="github.png">
			</li>
		</ul>
		<label>Offline</label>
		<ul>
			<li class="user">
				<span class="status"></span>
				<img src="avatar.png">
			</li>
		</ul>

	</div>

	<div id="stage">
		<div id="rooms">
			<div id="room1" class="room active">
			</div>
			<div id="room2" class="room">
				<form id="loginform" action="/api/v1.0/getUserToken?callback=?" method="POST">
					<label>Username: <input type="text" name="username"></label>
					<label>Password: <input type="password" name="password"></label>
					<input type="submit" value="Log In">
				</form>
			</div>
			<div id="room3" class="room">
			</div>
		</div>

		<div id="controls">
			<ul id="roomtabs">
				<li class="active"><a href="#room1">Room 1</a></li>
				<li><a href="#room2">Room 2</a></li>
				<li><a href="#room3">Room 3</a></li>
			</ul>
			<div id="entry">
				<input type="text">
				<button>send</button>
			</div>
	</div>

</div>

<footer></footer>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="https://raw.github.com/andyet/ICanHaz.js/master/ICanHaz.min.js"></script>
<script type="text/javascript" src="http://wavded.github.com/humane-js/humane.js"></script>
<script type="text/javascript">
$(function(){
	// Initialize room sample content
	var s = 4;
	$('.room').each(function(){
		var element = $(this);
		s++;
		$.getJSON('http://json-lipsum.appspot.com/?amount=' + s + '&start=no&lang=en&callback=?', function(results) {
			for(var p in results.lipsum) {
				$(element).append('<p>' + results.lipsum[p] + '</p>');
			}
		});
	});


	$('#loginform').submit(function(){
		$.post(
			$('#loginform').attr('action'), 
			$('#loginform').serialize(), 
			function(response){
				if(response.err) {
					humane.error(response.errMsg);
				}
				else {
					humane.info('Logged in as ' + response.nickname + '.');
				}
			},
			'jsonp'
		);
		return false;
	});


	$('#roomtabs a').click(function(){
		$('.room,#roomtabs li').removeClass('active');
		$($(this).attr('href')).addClass('active');
		$(this).parents('li').addClass('active');
		return false;
	});

	window.setInterval(function(){
		$.get('/api/v1.0/getMessages', 'foo=1', function(data){
			console.log(data);
		}, 'jsonp');
	}, 2000);

});
</script>

</body>
</html>